{% extends 'print/_base_document.html' %}
{% block title %}Purchase Return #{{ pr['id'] }}{% endblock %}
{% block doc_title %}PURCHASE RETURN{% endblock %}
{% block doc_meta_rows %}
  <div class="meta-row"><strong>Return ID:</strong> {{ pr['id'] }}</div>
  <div class="meta-row"><strong>Return No:</strong> {{ pr['return_no'] or ('PR#' ~ pr['id']) }}</div>
  <div class="meta-row"><strong>Date:</strong> {{ pr['return_date'] or '-' }}</div>
{% endblock %}

{% block parties %}
<div class="cols">
  <div class="box">
    <div class="box-title">Supplier</div>
    <div class="box-line"><strong>{{ pr['name'] }}</strong></div>
    {% if pr['gstin'] %}<div class="box-line">GSTIN: {{ pr['gstin'] }}</div>{% endif %}
    {% if pr['address'] %}<div class="box-line">{{ pr['address'] }}</div>{% endif %}
    {% if pr['city'] or pr['state'] or pr['pincode'] %}
      <div class="box-line">{{ pr['city'] or '' }} {{ pr['pincode'] or '' }} {{ pr['state'] or '' }}</div>
    {% endif %}
    {% if pr['phone'] %}<div class="box-line">Phone: {{ pr['phone'] }}</div>{% endif %}
    {% if pr['email'] %}<div class="box-line">Email: {{ pr['email'] }}</div>{% endif %}
  </div>
  <div class="box">
    <div class="box-title">Bill To</div>
    <div class="box-line"><strong>FLORA Textile BI</strong></div>
    <div class="box-line">1st floor, opp Head Post office</div>
    <div class="box-line">M G Road, Bijapur 586101</div>
    <div class="box-line">Karnataka, India</div>
    <div class="box-line">GSTIN: 29AUDPD7648G1ZG</div>
  </div>
</div>
{% endblock %}

{% block table_headers %}
  <th class="col-sno">#</th>
  <th class="col-item">Item</th>
  <th class="col-num">Qty</th>
  <th class="col-num">Rate (₹)</th>
  <th class="col-num">Discount (₹)</th>
  <th class="col-num">{% if 'gst_type' in pr.keys() and (pr['gst_type'] or '') == 'interstate' %}IGST %{% else %}GST %{% endif %}</th>
  <th class="col-num">Line Total (₹)</th>
{% endblock %}

{% block table_rows %}
  {% for li in lines %}
  <tr>
    <td class="right">{{ loop.index }}</td>
    <td>{{ li['item_name'] }}</td>
    <td class="right">{{ '%.2f'|format(li['qty'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(li['rate'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(li['discount'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(li['gst_rate'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(li['line_total'] or 0) }}</td>
  </tr>
  {% endfor %}
{% endblock %}

{% block summary_rows %}
  <tr>
    <td class="label">Sub Total</td>
    <td class="amount">₹ {{ '%.2f'|format(pr['total'] or 0) }}</td>
  </tr>
  <tr>
    <td class="label">CGST</td>
    <td class="amount">₹ {{ '%.2f'|format(pr['cgst_total'] or 0) }}</td>
  </tr>
  <tr>
    <td class="label">SGST</td>
    <td class="amount">₹ {{ '%.2f'|format(pr['sgst_total'] or 0) }}</td>
  </tr>
  <tr>
    <td class="label">IGST</td>
    <td class="amount">₹ {{ '%.2f'|format(pr['igst_total'] or 0) }}</td>
  </tr>
  <tr class="grand">
    <td class="label">Grand Total</td>
    <td class="amount">₹ {{ '%.2f'|format(pr['grand_total'] or 0) }}</td>
  </tr>
{% endblock %}

{% block notes %}
  {% if pr['notes'] %}
  <div class="box-title">Notes</div>
  <div>{{ pr['notes'] }}</div>
  {% endif %}
{% endblock %}

{% block signatures %}
  <div class="sig">Received By</div>
  <div class="sig right">Authorized Signatory</div>
{% endblock %}