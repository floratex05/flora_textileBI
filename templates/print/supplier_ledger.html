{% extends 'print/_base_document.html' %}
{% block title %}Supplier Ledger — {{ supplier['name'] }}{% endblock %}
{% block doc_title %}SUPPLIER LEDGER{% endblock %}

{% block parties %}
<div class="cols">
  <div class="box">
    <div class="box-title">Supplier</div>
    <div class="box-line"><strong>{{ supplier['name'] }}</strong></div>
    {% if supplier['gstin'] %}<div class="box-line">GSTIN: {{ supplier['gstin'] }}</div>{% endif %}
    {% if supplier['address'] %}<div class="box-line">{{ supplier['address'] }}</div>{% endif %}
    <div class="box-line">{{ (supplier['city'] or '') }}{% if supplier['state'] %}, {{ supplier['state'] }}{% endif %}{% if supplier['pincode'] %} - {{ supplier['pincode'] }}{% endif %}</div>
    {% if supplier['phone'] %}<div class="box-line">Phone: {{ supplier['phone'] }}</div>{% endif %}
    {% if supplier['email'] %}<div class="box-line">Email: {{ supplier['email'] }}</div>{% endif %}
  </div>
  <div class="box">
    <div class="box-line"><strong>As of:</strong> {{ as_of }}</div>
  </div>
</div>
{% endblock %}

{% block table_headers %}
  <th class="col-sno">#</th>
  <th>Date</th>
  <th>Type</th>
  <th>Reference</th>
  <th>Notes</th>
  <th class="col-num">Debit (₹)</th>
  <th class="col-num">Credit (₹)</th>
  <th class="col-num">Balance (₹)</th>
{% endblock %}

{% block table_rows %}
  {% for r in ledger %}
  <tr>
    <td class="right">{{ loop.index }}</td>
    <td>{{ r['date'] or '' }}</td>
    <td>{{ r['txn_type'] }}</td>
    <td>{{ r['reference'] or '' }}</td>
    <td>{{ r['notes'] or '' }}</td>
    <td class="right">{{ '%.2f'|format(r['debit'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(r['credit'] or 0) }}</td>
    <td class="right">{{ '%.2f'|format(r['balance'] or 0) }}</td>
  </tr>
  {% endfor %}
{% endblock %}

{% block summary_rows %}
  <tr>
    <td class="label">Total Debit</td><td class="amount" colspan="7">₹ {{ '%.2f'|format(total_debit or 0) }}</td>
  </tr>
  <tr>
    <td class="label">Total Credit</td><td class="amount" colspan="7">₹ {{ '%.2f'|format(total_credit or 0) }}</td>
  </tr>
  <tr class="grand">
    <td class="label">Balance</td><td class="amount" colspan="7">₹ {{ '%.2f'|format(balance or 0) }}</td>
  </tr>
{% endblock %}

{% block notes %}
  <div class="box-title" style="margin-top:8px">Notes</div>
  <div>This ledger summarizes purchase invoices and payments recorded for the supplier.</div>
{% endblock %}